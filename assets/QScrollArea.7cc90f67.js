var fe=Object.defineProperty,he=Object.defineProperties;var me=Object.getOwnPropertyDescriptors;var Q=Object.getOwnPropertySymbols;var be=Object.prototype.hasOwnProperty,pe=Object.prototype.propertyIsEnumerable;var N=(o,r,n)=>r in o?fe(o,r,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[r]=n,S=(o,r)=>{for(var n in r||(r={}))be.call(r,n)&&N(o,n,r[n]);if(Q)for(var n of Q(r))pe.call(r,n)&&N(o,n,r[n]);return o},E=(o,r)=>he(o,me(r));import{u as ze,a as ye}from"./use-dark.9abc0a66.js";import{a as V,Q as Se,b as M,s as U,c as I}from"./QResizeObserver.4a10dfbb.js";import{Z as ge,$ as _,R as Ce,a0 as _e,G as A,a1 as O,K,I as H,J as B,H as D,N as qe,r as b,c as f,a2 as we,W as Pe,V as Ee,f as Me,h as z,M as x,g as Ae}from"./index.c09cfb2a.js";import{b as Oe,c as He,a as De}from"./dom.a81ea2fe.js";const R={left:!0,right:!0,up:!0,down:!0,horizontal:!0,vertical:!0},Te=Object.keys(R);R.all=!0;function G(o){const r={};for(const n of Te)o[n]===!0&&(r[n]=!0);return Object.keys(r).length===0?R:(r.horizontal===!0?r.left=r.right=!0:r.left===!0&&r.right===!0&&(r.horizontal=!0),r.vertical===!0?r.up=r.down=!0:r.up===!0&&r.down===!0&&(r.vertical=!0),r.horizontal===!0&&r.vertical===!0&&(r.all=!0),r)}function J(o,r){return r.event===void 0&&o.target!==void 0&&o.target.draggable!==!0&&typeof r.handler=="function"&&o.target.nodeName.toUpperCase()!=="INPUT"&&(o.qClonedBy===void 0||o.qClonedBy.indexOf(r.uid)===-1)}function je(){if(window.getSelection!==void 0){const o=window.getSelection();o.empty!==void 0?o.empty():o.removeAllRanges!==void 0&&(o.removeAllRanges(),ge.is.mobile!==!0&&o.addRange(document.createRange()))}else document.selection!==void 0&&document.selection.empty()}function T(o,r,n){const d=B(o);let e,l=d.left-r.event.x,i=d.top-r.event.y,t=Math.abs(l),v=Math.abs(i);const s=r.direction;s.horizontal===!0&&s.vertical!==!0?e=l<0?"left":"right":s.horizontal!==!0&&s.vertical===!0?e=i<0?"up":"down":s.up===!0&&i<0?(e="up",t>v&&(s.left===!0&&l<0?e="left":s.right===!0&&l>0&&(e="right"))):s.down===!0&&i>0?(e="down",t>v&&(s.left===!0&&l<0?e="left":s.right===!0&&l>0&&(e="right"))):s.left===!0&&l<0?(e="left",t<v&&(s.up===!0&&i<0?e="up":s.down===!0&&i>0&&(e="down"))):s.right===!0&&l>0&&(e="right",t<v&&(s.up===!0&&i<0?e="up":s.down===!0&&i>0&&(e="down")));let y=!1;if(e===void 0&&n===!1){if(r.event.isFirst===!0||r.event.lastDir===void 0)return{};e=r.event.lastDir,y=!0,e==="left"||e==="right"?(d.left-=l,t=0,l=0):(d.top-=i,v=0,i=0)}return{synthetic:y,payload:{evt:o,touch:r.event.mouse!==!0,mouse:r.event.mouse===!0,position:d,direction:e,isFirst:r.event.isFirst,isFinal:n===!0,duration:Date.now()-r.event.time,distance:{x:t,y:v},offset:{x:l,y:i},delta:{x:d.left-r.event.lastX,y:d.top-r.event.lastY}}}}let Be=0;var W=Oe({name:"touch-pan",beforeMount(o,{value:r,modifiers:n}){if(n.mouse!==!0&&_.has.touch!==!0)return;function d(l,i){n.mouse===!0&&i===!0?qe(l):(n.stop===!0&&H(l),n.prevent===!0&&K(l))}const e={uid:"qvtp_"+Be++,handler:r,modifiers:n,direction:G(n),noop:Ce,mouseStart(l){J(l,e)&&_e(l)&&(A(e,"temp",[[document,"mousemove","move","notPassiveCapture"],[document,"mouseup","end","passiveCapture"]]),e.start(l,!0))},touchStart(l){if(J(l,e)){const i=l.target;A(e,"temp",[[i,"touchmove","move","notPassiveCapture"],[i,"touchcancel","end","passiveCapture"],[i,"touchend","end","passiveCapture"]]),e.start(l)}},start(l,i){if(_.is.firefox===!0&&O(o,!0),e.lastEvt=l,i===!0||n.stop===!0){if(e.direction.all!==!0&&(i!==!0||e.modifiers.mouseAllDir!==!0)){const s=l.type.indexOf("mouse")>-1?new MouseEvent(l.type,l):new TouchEvent(l.type,l);l.defaultPrevented===!0&&K(s),l.cancelBubble===!0&&H(s),Object.assign(s,{qKeyEvent:l.qKeyEvent,qClickOutside:l.qClickOutside,qAnchorHandled:l.qAnchorHandled,qClonedBy:l.qClonedBy===void 0?[e.uid]:l.qClonedBy.concat(e.uid)}),e.initialEvent={target:l.target,event:s}}H(l)}const{left:t,top:v}=B(l);e.event={x:t,y:v,time:Date.now(),mouse:i===!0,detected:!1,isFirst:!0,isFinal:!1,lastX:t,lastY:v}},move(l){if(e.event===void 0)return;const i=B(l),t=i.left-e.event.x,v=i.top-e.event.y;if(t===0&&v===0)return;e.lastEvt=l;const s=e.event.mouse===!0,y=()=>{d(l,s),n.preserveCursor!==!0&&(document.documentElement.style.cursor="grabbing"),s===!0&&document.body.classList.add("no-pointer-events--children"),document.body.classList.add("non-selectable"),je(),e.styleCleanup=m=>{if(e.styleCleanup=void 0,n.preserveCursor!==!0&&(document.documentElement.style.cursor=""),document.body.classList.remove("non-selectable"),s===!0){const C=()=>{document.body.classList.remove("no-pointer-events--children")};m!==void 0?setTimeout(()=>{C(),m()},50):C()}else m!==void 0&&m()}};if(e.event.detected===!0){e.event.isFirst!==!0&&d(l,e.event.mouse);const{payload:m,synthetic:C}=T(l,e,!1);m!==void 0&&(e.handler(m)===!1?e.end(l):(e.styleCleanup===void 0&&e.event.isFirst===!0&&y(),e.event.lastX=m.position.left,e.event.lastY=m.position.top,e.event.lastDir=C===!0?void 0:m.direction,e.event.isFirst=!1));return}if(e.direction.all===!0||s===!0&&e.modifiers.mouseAllDir===!0){y(),e.event.detected=!0,e.move(l);return}const p=Math.abs(t),h=Math.abs(v);p!==h&&(e.direction.horizontal===!0&&p>h||e.direction.vertical===!0&&p<h||e.direction.up===!0&&p<h&&v<0||e.direction.down===!0&&p<h&&v>0||e.direction.left===!0&&p>h&&t<0||e.direction.right===!0&&p>h&&t>0?(e.event.detected=!0,e.move(l)):e.end(l,!0))},end(l,i){if(e.event!==void 0){if(D(e,"temp"),_.is.firefox===!0&&O(o,!1),i===!0)e.styleCleanup!==void 0&&e.styleCleanup(),e.event.detected!==!0&&e.initialEvent!==void 0&&e.initialEvent.target.dispatchEvent(e.initialEvent.event);else if(e.event.detected===!0){e.event.isFirst===!0&&e.handler(T(l===void 0?e.lastEvt:l,e).payload);const{payload:t}=T(l===void 0?e.lastEvt:l,e,!0),v=()=>{e.handler(t)};e.styleCleanup!==void 0?e.styleCleanup(v):v()}e.event=void 0,e.initialEvent=void 0,e.lastEvt=void 0}}};o.__qtouchpan=e,n.mouse===!0&&A(e,"main",[[o,"mousedown","mouseStart",`passive${n.mouseCapture===!0?"Capture":""}`]]),_.has.touch===!0&&A(e,"main",[[o,"touchstart","touchStart",`passive${n.capture===!0?"Capture":""}`],[o,"touchmove","noop","notPassiveCapture"]])},updated(o,r){const n=o.__qtouchpan;n!==void 0&&(r.oldValue!==r.value&&(typeof value!="function"&&n.end(),n.handler=r.value),n.direction=G(r.modifiers))},beforeUnmount(o){const r=o.__qtouchpan;r!==void 0&&(r.event!==void 0&&r.end(),D(r,"main"),D(r,"temp"),_.is.firefox===!0&&O(o,!1),r.styleCleanup!==void 0&&r.styleCleanup(),delete o.__qtouchpan)}});const Z=["vertical","horizontal"],j={vertical:{offset:"offsetY",scroll:"scrollTop",dir:"down",dist:"y"},horizontal:{offset:"offsetX",scroll:"scrollLeft",dir:"right",dist:"x"}},ee={prevent:!0,mouse:!0,mouseAllDir:!0};var $e=He({name:"QScrollArea",props:E(S({},ze),{thumbStyle:Object,verticalThumbStyle:Object,horizontalThumbStyle:Object,barStyle:[Array,String,Object],verticalBarStyle:[Array,String,Object],horizontalBarStyle:[Array,String,Object],contentStyle:[Array,String,Object],contentActiveStyle:[Array,String,Object],delay:{type:[String,Number],default:1e3},visible:{type:Boolean,default:null},tabindex:[String,Number],onScroll:Function}),setup(o,{slots:r,emit:n}){const d=b(!1),e=b(!1),l=b(!1),i={vertical:b(0),horizontal:b(0)},t={vertical:{ref:b(null),position:b(0),size:b(0)},horizontal:{ref:b(null),position:b(0),size:b(0)}},v=Ae(),s=ye(o,v.proxy.$q);let y,p;const h=b(null),m=f(()=>"q-scrollarea"+(s.value===!0?" q-scrollarea--dark":""));t.vertical.percentage=f(()=>{const a=t.vertical.size.value-i.vertical.value;if(a<=0)return 0;const u=M(t.vertical.position.value/a,0,1);return Math.round(u*1e4)/1e4}),t.vertical.thumbHidden=f(()=>(o.visible===null?l.value:o.visible)!==!0&&d.value===!1&&e.value===!1||t.vertical.size.value<=i.vertical.value+1),t.vertical.thumbStart=f(()=>t.vertical.percentage.value*(i.vertical.value-t.vertical.thumbSize.value)),t.vertical.thumbSize=f(()=>Math.round(M(i.vertical.value*i.vertical.value/t.vertical.size.value,50,i.vertical.value))),t.vertical.style=f(()=>E(S(S({},o.thumbStyle),o.verticalThumbStyle),{top:`${t.vertical.thumbStart.value}px`,height:`${t.vertical.thumbSize.value}px`})),t.vertical.thumbClass=f(()=>"q-scrollarea__thumb q-scrollarea__thumb--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.vertical.barClass=f(()=>"q-scrollarea__bar q-scrollarea__bar--v absolute-right"+(t.vertical.thumbHidden.value===!0?" q-scrollarea__bar--invisible":"")),t.horizontal.percentage=f(()=>{const a=t.horizontal.size.value-i.horizontal.value;if(a<=0)return 0;const u=M(t.horizontal.position.value/a,0,1);return Math.round(u*1e4)/1e4}),t.horizontal.thumbHidden=f(()=>(o.visible===null?l.value:o.visible)!==!0&&d.value===!1&&e.value===!1||t.horizontal.size.value<=i.horizontal.value+1),t.horizontal.thumbStart=f(()=>t.horizontal.percentage.value*(i.horizontal.value-t.horizontal.thumbSize.value)),t.horizontal.thumbSize=f(()=>Math.round(M(i.horizontal.value*i.horizontal.value/t.horizontal.size.value,50,i.horizontal.value))),t.horizontal.style=f(()=>E(S(S({},o.thumbStyle),o.horizontalThumbStyle),{left:`${t.horizontal.thumbStart.value}px`,width:`${t.horizontal.thumbSize.value}px`})),t.horizontal.thumbClass=f(()=>"q-scrollarea__thumb q-scrollarea__thumb--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__thumb--invisible":"")),t.horizontal.barClass=f(()=>"q-scrollarea__bar q-scrollarea__bar--h absolute-bottom"+(t.horizontal.thumbHidden.value===!0?" q-scrollarea__bar--invisible":""));const C=f(()=>t.vertical.thumbHidden.value===!0&&t.horizontal.thumbHidden.value===!0?o.contentStyle:o.contentActiveStyle),te=[[W,a=>{Y(a,"vertical")},void 0,S({vertical:!0},ee)]],re=[[W,a=>{Y(a,"horizontal")},void 0,S({horizontal:!0},ee)]];function k(){const a={};return Z.forEach(u=>{const c=t[u];a[u+"Position"]=c.position.value,a[u+"Percentage"]=c.percentage.value,a[u+"Size"]=c.size.value,a[u+"ContainerSize"]=i[u].value}),a}const F=we(()=>{const a=k();a.ref=v.proxy,n("scroll",a)},0);function X(a,u,c){if(Z.includes(a)===!1){console.error("[QScrollArea]: wrong first param of setScrollPosition (vertical/horizontal)");return}(a==="vertical"?U:I)(h.value,u,c)}function le({height:a,width:u}){let c=!1;i.vertical.value!==a&&(i.vertical.value=a,c=!0),i.horizontal.value!==u&&(i.horizontal.value=u,c=!0),c===!0&&q()}function oe({position:a}){let u=!1;t.vertical.position.value!==a.top&&(t.vertical.position.value=a.top,u=!0),t.horizontal.position.value!==a.left&&(t.horizontal.position.value=a.left,u=!0),u===!0&&q()}function ae({height:a,width:u}){t.horizontal.size.value!==u&&(t.horizontal.size.value=u,q()),t.vertical.size.value!==a&&(t.vertical.size.value=a,q())}function Y(a,u){const c=t[u];if(a.isFirst===!0){if(c.thumbHidden.value===!0)return;p=c.position.value,e.value=!0}else if(e.value!==!0)return;a.isFinal===!0&&(e.value=!1);const g=j[u],P=i[u].value,ce=(c.size.value-P)/(P-c.thumbSize.value),ve=a.distance[g.dist],de=p+(a.direction===g.dir?1:-1)*ve*ce;L(de,u)}function $(a,u){const c=t[u];if(c.thumbHidden.value!==!0){const g=a[j[u].offset];if(g<c.thumbStart.value||g>c.thumbStart.value+c.thumbSize.value){const P=g-c.thumbSize.value/2;L(P/i[u].value*c.size.value,u)}c.ref.value!==null&&c.ref.value.dispatchEvent(new MouseEvent(a.type,a))}}function ie(a){$(a,"vertical")}function ne(a){$(a,"horizontal")}function q(){d.value===!0?clearTimeout(y):d.value=!0,y=setTimeout(()=>{d.value=!1},o.delay),o.onScroll!==void 0&&F()}function L(a,u){h.value[j[u].scroll]=a}function ue(){l.value=!0}function se(){l.value=!1}Object.assign(v.proxy,{getScrollTarget:()=>h.value,getScroll:k,getScrollPosition:()=>({top:t.vertical.position.value,left:t.horizontal.position.value}),getScrollPercentage:()=>({top:t.vertical.percentage.value,left:t.horizontal.percentage.value}),setScrollPosition:X,setScrollPercentage(a,u,c){X(a,u*(t[a].size.value-i[a].value),c)}});let w=null;return Pe(()=>{w={top:t.vertical.position.value,left:t.horizontal.position.value}}),Ee(()=>{if(w===null)return;const a=h.value;a!==null&&(I(a,w.left),U(a,w.top))}),Me(F.cancel),()=>z("div",{class:m.value,onMouseenter:ue,onMouseleave:se},[z("div",{ref:h,class:"q-scrollarea__container scroll relative-position fit hide-scrollbar",tabindex:o.tabindex!==void 0?o.tabindex:void 0},[z("div",{class:"q-scrollarea__content absolute",style:C.value},De(r.default,[z(V,{debounce:0,onResize:ae})])),z(Se,{axis:"both",onScroll:oe})]),z(V,{debounce:0,onResize:le}),z("div",{class:t.vertical.barClass.value,style:[o.barStyle,o.verticalBarStyle],"aria-hidden":"true",onMousedown:ie}),z("div",{class:t.horizontal.barClass.value,style:[o.barStyle,o.horizontalBarStyle],"aria-hidden":"true",onMousedown:ne}),x(z("div",{ref:t.vertical.ref,class:t.vertical.thumbClass.value,style:t.vertical.style.value,"aria-hidden":"true"}),te),x(z("div",{ref:t.horizontal.ref,class:t.horizontal.thumbClass.value,style:t.horizontal.style.value,"aria-hidden":"true"}),re)])}});export{$e as Q};
